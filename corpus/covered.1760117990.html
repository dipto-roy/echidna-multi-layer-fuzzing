<style> code { white-space: pre-wrap; display: block; background-color: #eee; }.executed { background-color: #afa; }.reverted { background-color: #ffa; }.unexecuted { background-color: #faa; }.neutral { background-color: #eee; }</style><b>/home/dip-roy/echidna_dev/echidna_1/echidna/contact/cpamm.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  3 |     | <span class='neutral'></span>
  4 | *r  | <span class='executed'>contract CPAMM {</span>
  5 | *   | <span class='executed'>    uint112 public reserve0;</span>
  6 | *   | <span class='executed'>    uint112 public reserve1;</span>
  7 |     | <span class='neutral'></span>
  8 | *   | <span class='executed'>    function addLiquidity(uint112 a0, uint112 a1) external {</span>
  9 | *   | <span class='executed'>        reserve0 += a0;</span>
 10 | *   | <span class='executed'>        reserve1 += a1;</span>
 11 |     | <span class='neutral'>    }</span>
 12 |     | <span class='neutral'></span>
 13 | *   | <span class='executed'>    function swap0For1(uint112 dx) external {</span>
 14 | *r  | <span class='executed'>        require(reserve0 + dx &gt; 0 &amp;&amp; reserve1 &gt; 0, &quot;empty&quot;);</span>
 15 |     | <span class='neutral'>        // Constant product x*y=k (approx naive, no fee)</span>
 16 | *   | <span class='executed'>        uint256 newX = uint256(reserve0) + dx;</span>
 17 | *   | <span class='executed'>        uint256 k = uint256(reserve0) * uint256(reserve1);</span>
 18 | *   | <span class='executed'>        uint256 newY = k / newX;</span>
 19 | *   | <span class='executed'>        uint112 dy = reserve1 - uint112(newY);</span>
 20 | *   | <span class='executed'>        reserve0 = uint112(newX);</span>
 21 | *   | <span class='executed'>        reserve1 = uint112(newY);</span>
 22 |     | <span class='neutral'>        // dy would be sent to user</span>
 23 |     | <span class='neutral'>    }</span>
 24 |     | <span class='neutral'></span>
 25 |     | <span class='unexecuted'>    function echidna_reserves_fit() external view returns (bool) {</span>
 26 |     | <span class='unexecuted'>        return reserve0 &lt;= type(uint112).max &amp;&amp; reserve1 &lt;= type(uint112).max;</span>
 27 |     | <span class='neutral'>    }</span>
 28 |     | <span class='neutral'>}</span>

</code>
<br />

